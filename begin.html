<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Js1</title>
    <link rel="stylesheet" href="begin.css">
    <style>
    </style>
    </div>
</head>
<body>
    <label for="main">输入字符串:</label>
    <input type="text" id="main">
    <br>
    <label for="sub">输入子串:</label>
    <input type="text" id="sub">
    <br>
    <button id="countButton">确认</button>
    <div id="result"></div>
    <br>
    <br>
    <br>
    <label for="emailInput">邮箱</label>
    <input type="text" id="emailInput">
    <br>
    <label for="passInput">密码</label>
    <input type="text" id="passInput">
    <br>
    <button onclick="check()">确认</button>
    <br>
    <div id="result2"></div>
    <br>
    <br>
    <div id="result3"></div>
    <script>
        //将第一个按钮和函数关联
        document.getElementById('countButton').addEventListener('click', function () {
            //获取dom元素
            const mainStr = document.getElementById('main').value
            const subStr = document.getElementById('sub').value
            let count = 0
            let start = 0
            while (true) {
                //使用indexof在mainStr的start位置查找substr
                const index = mainStr.indexOf(subStr, start)
                //index=-1说明查找完成

                if (index === -1) {
                    break
                }
                count++
                //重新确定索引起点
                start = index + subStr.length
            }
            document.getElementById('result').innerHTML = `子串 "${subStr}" 在字符串 "${mainStr}" 中出现的次数为: ${count}`
        })

            //定义函数，用正则表达式检验
                function checkEmail(email) {
            const regex =  /@(qq|163)(\.cn|\.com)$/
                return regex.test(email)
                }
                //定义check函数
                function check() {
            const emailInput = document.getElementById('emailInput')
                const resultDiv = document.getElementById('result2')
                const email = emailInput.value
                if (email) {
                const result = checkEmail(email)
                //匹配成功返回true，否则返回false
                if (result) {
                    resultDiv.innerHTML = '账号格式输入正确'
                } else {
                    resultDiv.innerHTML = '账号格式输入错误'
                }
            } else {
                    resultDiv.innerHTML = '请输入邮箱地址'
            }
            //第二个功能
        let msg = [
                {
                    name: '张三',
                    age: 20,
                    strengths: 'JavaScript',
                    avatar: 'https://tse4-mm.cn.bing.net/th/id/OIP-C.39n0OMBjUfsK-HL9jUbv1MwHaE7?pid=ImgDet&rs=1',
                    email: 'yunding@qq.com',
                    password: '333333'
                },
                {
                    name: '李四',
                    age: 19,
                    strengths: 'python',
                    avatar: 'https://tse2-mm.cn.bing.net/th/id/OIP-C.YlKimVo940kaZDZCzPIDpAHaFh?pid=ImgDet&rs=1',
                    email: '12345678@163.com',
                    password: '11111'
                },
                {
                    name: '王五',
                    age: 18,
                    strengths: 'Java',
                    avatar: 'https://tse2-mm.cn.bing.net/th/id/OIP-C.P2hK9SRjhFE8WM9N8tgWFAHaEQ?pid=ImgDet&rs=1',
                    email: 'yundingshuyuan@qq.com',
                    password: '222222'
                }
            ]
                    const password = document.getElementById('passInput').value
                    let user = 0
                    //循环寻找匹配对象
                    for (let i = 0; i < msg.length; i++) {
                        if (msg[i].email === email && msg[i].password === password) {
                            user = 1
                            document.getElementById('result3').innerHTML = `
                        <h2>Welcome, ${msg[i].name}</h2>
                        <p>age: ${msg[i].age}</p >
                        <p>strengths: ${msg[i].strengths}</p >
                        `
                            break
                        }
                    }
                        if(user===0) {
                        document.getElementById('result3').innerHTML = "用户名或密码错误"
                    }
                }
    </script>
</body>

</html>